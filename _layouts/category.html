---
layout: default
---

{% comment %}
Category Layout - displays posts filtered by category
Shows the same structure as home page with category navigation
{% endcomment %}

{% comment %} Find the featured post for this category (most recent) {% endcomment %}
{% assign featured_post = null %}
{% for post in site.posts %}
  {% if post.categories contains page.category %}
    {% assign featured_post = post %}
    {% break %}
  {% endif %}
{% endfor %}

{% if featured_post %}
<section class="featured-post">
  {% if featured_post.banner_photo_url %}
    <img class="featured-post-image desktop" src="{{ featured_post.banner_photo_url | relative_url }}" alt="{{ featured_post.title }}">
  {% endif %}
  {% if featured_post.mobile_cover_photo_url %}
    <img class="featured-post-image mobile" src="{{ featured_post.mobile_cover_photo_url | relative_url }}" alt="{{ featured_post.title }}">
  {% elsif featured_post.cover_photo_url %}
    <img class="featured-post-image mobile" src="{{ featured_post.cover_photo_url | relative_url }}" alt="{{ featured_post.title }}">
  {% endif %}
  <div class="featured-post-content">
    <p class="featured-post-content-tag">Najnowszy spacer</p>
    <h1 class="featured-post-content-title">
      <a href="{{ featured_post.url | relative_url }}" title="Link do {{ featured_post.title }}">
        {{ featured_post.title }}
      </a>
    </h1>
    <a class="button content-read-on" href="{{ featured_post.url | relative_url }}" title="Czytaj dalej {{ featured_post.title }}">
      Zobacz więcej
      <i class="fa fa-angle-right" style="margin-left:.6em;"></i>
    </a>
  </div>
</section>
{% endif %}

<h1 class="articles-header home-rest-tag mobile">Pozostałe wpisy</h1>

<p class="home-mobile-dropdown mobile" onclick="toggleFilters()">
  <span id="selectedCategoryName">{{ page.category }}</span>
  <span>▼</span>
</p>

<ul class="tabs mod-collapsed">
  <li class="tabs-item {% if page.category == null %}mod-selected{% endif %}" data-category-id="0">
    <a href="{{ '/' | relative_url }}" style="color: inherit; text-decoration: none;">wszystkie</a>
  </li>
  {% assign categories = "miasta,parki,zamki,pola,woda,góry,lasy" | split: "," %}
  {% assign category_urls = "miasta,parki,zamki,pola,woda,gory,lasy" | split: "," %}
  {% for category in categories %}
    {% assign category_url = category_urls[forloop.index0] %}
    <li class="tabs-item {% if page.category == category %}mod-selected{% endif %}" data-category-id="{{ category }}">
      <a href="{{ '/' | append: category_url | append: '/' | relative_url }}" style="color: inherit; text-decoration: none; display: flex; align-items: center; gap: 0.5em;">
        <img class="tabs-item-image" src="{{ '/assets/images/' | append: category | append: '.svg' | relative_url }}" alt="{{ category }}">
        {{ category }}
      </a>
    </li>
  {% endfor %}
</ul>

{% comment %} Collect all posts for this category (excluding featured) {% endcomment %}
<div class="articles">
  {% for post in site.posts %}
    {% if post.categories contains page.category %}
      {% if featured_post == null or post.url != featured_post.url %}
        {% include post-tile.html %}
      {% endif %}
    {% endif %}
  {% endfor %}
</div>

<script>
function toggleFilters() {
  const tabs = document.querySelector('.tabs');
  tabs.classList.toggle('mod-collapsed');
}
</script>
